Requirements
- apache2 or nginx
- php5.x+
- mysql or postgres extension
- curl extension
- ffmpeg (for thumbnails)
- imagemagick (for catpcha)

# Shared hosting help
download the zip from GitGud.IO
you'll also need zips from:

- https://github.com/PHPMailer/PHPMailer
- https://github.com/paragonie/sodium_compat

and place them into the common folder

place into your `public_html/` (usually using FTP/SFTP)


# Debian-ish help
Make sure you have git:
`apt install git`

create a clone of the repo (this is assume nothing else on the webserver)
```
cd /var/www
mv html old
git clone https://gitgud.io/odilitime/lynxphp.git
ln -s lynxphp/frontend html
cd lynxphp
git submodule init
git submodule update
mkdir frontend_storage
chmod -R 777 frontend_storage
cd frontend
ln -s ../backend
```


Now you need to pick a webserver

- NGINX (serves fixed limits)
- Apache2 (serves until it kills your server)

## NGINX

Install the basic packages:
`apt install nginx php-fpm php-curl git`

in `/etc/php/7.4/fpm/pool.d/www.conf` you may consider changing listen to use a loopback IP instead of a socket.
Socket can have buffering issues under heavy load with PHP. And be sure to restart it: `/etc/init.d/php7.4-fpm restart`.

/etc/nginx/sites-enabled
```
server {
  listen 80 default_server;
  listen [::]:80 default_server;

  # SSL configuration
  #
  # listen 443 ssl default_server;
  # listen [::]:443 ssl default_server;
  #
  # Note: You should disable gzip for SSL traffic.
  # See: https://bugs.debian.org/773332
  #
  # Read up on ssl_ciphers to ensure a secure configuration.
  # See: https://bugs.debian.org/765782
  #
  # Self signed certs generated by the ssl-cert package
  # Don't use them in a production server!
  #
  # include snippets/snakeoil.conf;

  root /var/www/html;

  # Add index.php to the list if you are using PHP
  index index.php;

  server_name _;

  location /backend {
          if (!-e $request_filename){
            rewrite ^/backend(.*)$ /backend/index.php$1;
    }
  }

  location / {
    # First attempt to serve request as file, then
    # as directory, then fall back to displaying a 404.
    try_files $uri $uri/ /index.php$uri;
  }

  # pass PHP scripts to FastCGI server
  #
  location ~ [^/]\.php(/|$) {
    include snippets/fastcgi-php.conf;
  #
  #	# With php-fpm (or other unix sockets):
  #	fastcgi_pass unix:/var/run/php/php7.4-fpm.sock;
  #	# With php-cgi (or other tcp sockets):
    fastcgi_pass 127.0.0.1:9000;
  }

  # deny access to .htaccess files, if Apache's document root
  # concurs with nginx's one
  #
  #location ~ /\.ht {
  #	deny all;
  #}
}

```
and restart it `/etc/init.d/nginx restart`

## Debian-ish Apache help

```
apt install apache2 libapache2-mod-php php-curl
a2enmod rewrite
a2enmod ssl
a2ensite default-ssl
```

Change AllowOverride to All
/etc/apache2/apache2.conf
```
<Directory /var/www/>
  Options Indexes FollowSymLinks
  AllowOverride All
  Require all granted
</Directory>
```

And finally, restart apache2 with these new changes:
`/etc/init.d/apache2 restart`

then you need to make config_HOSTNAME.php in frontend and backend

NOTE: x and y are used a placeholder, come up with something unique

then backend config will need some database settings set
```
<?php
define('DB_HOST', 'localhost');
define('DB_USER', 'x');
define('DB_PWD', 'y');
define('DB_NAME', 'lynxphp');
define('BACKEND_KEY', RANDOM_STRING);
?>
```

Change RANDOM_STRING to something random with quotes around it!

also you'll need to make these directories and make sure they're web server writable (chown www-data or chmod 777)
- backend/storage
- backend/storage/tmp
- backend/storage/boards

## mysql instruction
`apt install mysql-server php-mysql`


You'll likely need to go into mysql, create the db and user:
```
create database lynxphp;
grant all on lynxphp.* to x@localhost identified by 'y';
flush privileges;
```

## postgres instruction
`apt install postgresql php-pgsql`

You'll likely need to go into postgres, create the db and user:
`su postgres`
`psql`
`CREATE USER x WITH PASSWORD 'y';`
`CREATE DATABASE lynxphp;`
`\q` to quit

then you need to make config_HOSTNAME.php in frontend and backend

NOTE: x and y are used a placeholder, come up with something unique

then backend config will need some database settings set
```
<?php
define('DB_HOST', 'localhost');
define('DB_USER', 'x');
define('DB_PWD', 'y');
define('DB_NAME', 'lynxphp');
define('DB_DRIVER', 'pgsql');
define('BACKEND_KEY', RANDOM_STRING);
?>
```

Change RANDOM_STRING to something random with quotes around it!

# Installation Help

Frontend now has an install.php you can run to check your installation, to see if you have the requirements and have followed the install instructions correctly.
